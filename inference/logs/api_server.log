2025-10-31 10:43:39,430 - base.py - 49 - WARNING - Tool `retrieval` already exists! Overwriting with class <class 'tool_retrieval.Retrieval'>.
2025-10-31 10:43:39 - __main__ - INFO - æ—¥å¿—çº§åˆ«è®¾ç½®ä¸º: INFO
/mnt/data6t/wangxiaojing/tongyi_deepresearch/DeepResearch-openevidence/inference/api_server.py:134: DeprecationWarning: 
        on_event is deprecated, use lifespan event handlers instead.

        Read more about it in the
        [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
        
  @app.on_event("startup")
2025-10-31 10:43:39 - __main__ - INFO - ğŸ”§ å¯åŠ¨é…ç½®:
2025-10-31 10:43:39 - __main__ - INFO -    APIç«¯å£: 5006
2025-10-31 10:43:39 - __main__ - INFO -    vLLMç«¯å£: 6001
2025-10-31 10:43:39 - __main__ - INFO -    æ¨¡å‹è·¯å¾„: /mnt/data6t/wangxiaojing/models/opensource_models/Alibaba-NLP/Tongyi-DeepResearch-30B-A3B
2025-10-31 10:43:39 - api_server - INFO - æ—¥å¿—çº§åˆ«è®¾ç½®ä¸º: INFO
INFO:     Started server process [2754023]
INFO:     Waiting for application startup.
2025-10-31 10:43:39 - api_server - INFO - ğŸš€ å¯åŠ¨Tongyi DeepResearch APIæœåŠ¡å™¨...
2025-10-31 10:43:39 - api_server - INFO - âœ… æ¨ç†ä»£ç†é…ç½®æ¨¡æ¿åˆå§‹åŒ–å®Œæˆ
2025-10-31 10:43:39 - api_server - INFO - ğŸ“¡ LLM APIåœ°å€: https://dashscope.aliyuncs.com/compatible-mode/v1
2025-10-31 10:43:39 - api_server - INFO - ğŸ¤– æ¨¡å‹: qwen3-32b
2025-10-31 10:43:39 - api_server - INFO - ğŸ”‘ API Key (masked): sk-f59e9bf...f991e
2025-10-31 10:43:39 - api_server - INFO - ğŸŒ APIæœåŠ¡å™¨å°†åœ¨ç«¯å£ 5006 ä¸Šè¿è¡Œ
2025-10-31 10:43:39 - api_server - INFO - ğŸ”’ å¹¶å‘æ§åˆ¶: æœ€å¤§å¹¶å‘è¯·æ±‚æ•° = 3
2025-10-31 10:43:39 - api_server - INFO - ğŸ’¡ æç¤º: å¯é€šè¿‡ç¯å¢ƒå˜é‡ MAX_CONCURRENT_REQUESTS è°ƒæ•´å¹¶å‘æ•°
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:5006 (Press CTRL+C to quit)
INFO:     127.0.0.1:60784 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:49667 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:22367 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:46596 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:32013 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:24348 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:6842 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:29901 - "GET /docs HTTP/1.1" 200 OK
INFO:     10.31.95.28:48384 - "GET /openapi.json HTTP/1.1" 200 OK
INFO:     10.31.95.28:16168 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:32406 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:30718 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:58793 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:31592 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:44485 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:23688 - "OPTIONS /chat/stream HTTP/1.1" 200 OK
INFO:     10.31.95.28:23690 - "POST /chat/stream HTTP/1.1" 200 OK
2025-10-31 10:48:58 - api_server - INFO - â³ [Session 0b8b4ab0] ç­‰å¾…è·å–å¤„ç†æ§½ä½... (å½“å‰æ´»è·ƒ: 0)
2025-10-31 10:48:58 - api_server - INFO - ğŸš€ [Session 0b8b4ab0] è·å–æ§½ä½æˆåŠŸï¼Œå¼€å§‹å¤„ç†é—®é¢˜: ç”·æ€§ï¼Œ52å²ã€‚ ä¸»è¯‰è…¹ç—›ã€æ¶å¿ƒã€å‘•å1å¤©ã€‚ ç°ç—…å²æ‚£è€…1å¤©å‰çªå‘ä¸Šè…¹ç—›ï¼Œä¼´æ¶å¿ƒï¼Œå‘•åèƒƒå†…å®¹ç‰©ã€‚å‘•åå...
2025-10-31 10:48:59 - streaming_agent - INFO - === StreamingReactAgent.stream_run START ===
2025-10-31 10:48:59 - streaming_agent - INFO - ğŸ§  å·²å¯ç”¨æ€è€ƒæ¨¡å¼ (thinking_budget=1000)
2025-10-31 10:48:59 - httpx - INFO - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-31 10:49:08 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æ€è€ƒè¿‡ç¨‹å®Œæˆï¼Œè€—æ—¶: 9.01 ç§’
2025-10-31 10:49:10 - streaming_agent - INFO - âœ… æµå¼è°ƒç”¨æˆåŠŸ - æ€è€ƒ: 449å­—, å›ç­”: 186å­—
2025-10-31 10:49:13 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æ£€ç´¢å·¥å…·æ‰§è¡Œå®Œæˆï¼Œè€—æ—¶: 2.80 ç§’
2025-10-31 10:49:14 - httpx - INFO - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-31 10:49:18 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æ£€ç´¢ç»“æœè¯„ä¼°å®Œæˆï¼Œè€—æ—¶: 4.78 ç§’
2025-10-31 10:49:18 - answer_system - INFO - ğŸ“ å‡†å¤‡ç­”æ¡ˆç”Ÿæˆå†…å®¹: 5228 å­—ç¬¦, 8 æ¡æ£€ç´¢ç»“æœ
2025-10-31 10:49:18 - answer_system - INFO - ğŸš€ å¼€å§‹è°ƒç”¨ç­”æ¡ˆç”ŸæˆAPI (æ¨¡å‹: qwen3-max)
2025-10-31 10:49:23 - httpx - INFO - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-31 10:49:23 - answer_system - INFO - âš¡ æ”¶åˆ°é¦–ä¸ªtokenï¼Œè€—æ—¶: 5.68ç§’
INFO:     10.31.95.28:30854 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:55608 - "GET /health HTTP/1.1" 200 OK
2025-10-31 10:50:11 - answer_system - INFO - ğŸ“š ç­”æ¡ˆä¸­ä½¿ç”¨äº† 5/8 ä¸ªå‚è€ƒæ–‡çŒ®: [1, 2, 3, 5, 7]
2025-10-31 10:50:11 - answer_system - WARNING - âš ï¸ å¼•ç”¨ç¼–å·ä¸è¿ç»­ï¼é¢„æœŸ: [1, 2, 3, 4, 5], å®é™…: [1, 2, 3, 5, 7]
2025-10-31 10:50:11 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æœ€ç»ˆç­”æ¡ˆç”Ÿæˆå®Œæˆï¼Œè€—æ—¶: 53.48 ç§’
2025-10-31 10:50:11 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æ•´ä¸ªæµç¨‹å®Œæˆï¼Œæ€»è€—æ—¶: 72.57 ç§’
2025-10-31 10:50:11 - streaming_agent - INFO - === StreamingReactAgent.stream_run COMPLETED (FROM RETRIEVAL) ===
2025-10-31 10:50:11 - api_server - INFO - âœ… [Session 0b8b4ab0] å¤„ç†å®Œæˆï¼Œé‡Šæ”¾æ§½ä½
2025-10-31 10:50:11 - api_server - INFO - âœ… [Session 0b8b4ab0] ä¼šè¯æ­£å¸¸å®Œæˆ
2025-10-31 10:50:11 - api_server - INFO - ğŸ”“ [Session 0b8b4ab0] æ§½ä½å·²é‡Šæ”¾
INFO:     10.31.95.28:16403 - "GET /citation/1 HTTP/1.1" 200 OK
INFO:     10.31.95.28:53620 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:6052 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:5225 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:34127 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:39220 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.168.37:58114 - "OPTIONS /chat/stream HTTP/1.1" 200 OK
INFO:     10.31.168.37:58114 - "POST /chat/stream HTTP/1.1" 200 OK
2025-10-31 10:52:28 - api_server - INFO - â³ [Session 40210150] ç­‰å¾…è·å–å¤„ç†æ§½ä½... (å½“å‰æ´»è·ƒ: 1)
2025-10-31 10:52:28 - api_server - INFO - ğŸš€ [Session 40210150] è·å–æ§½ä½æˆåŠŸï¼Œå¼€å§‹å¤„ç†é—®é¢˜: ç”·æ€§ï¼Œ52å²ã€‚ ä¸»è¯‰è…¹ç—›ã€æ¶å¿ƒã€å‘•å1å¤©ã€‚ ç°ç—…å²æ‚£è€…1å¤©å‰çªå‘ä¸Šè…¹ç—›ï¼Œä¼´æ¶å¿ƒï¼Œå‘•åèƒƒå†…å®¹ç‰©ã€‚å‘•åå...
2025-10-31 10:52:28 - streaming_agent - INFO - === StreamingReactAgent.stream_run START ===
2025-10-31 10:52:28 - streaming_agent - INFO - ğŸ§  å·²å¯ç”¨æ€è€ƒæ¨¡å¼ (thinking_budget=1000)
2025-10-31 10:52:29 - httpx - INFO - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-31 10:52:37 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æ€è€ƒè¿‡ç¨‹å®Œæˆï¼Œè€—æ—¶: 8.40 ç§’
2025-10-31 10:52:43 - streaming_agent - INFO - âœ… æµå¼è°ƒç”¨æˆåŠŸ - æ€è€ƒ: 485å­—, å›ç­”: 397å­—
2025-10-31 10:52:46 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æ£€ç´¢å·¥å…·æ‰§è¡Œå®Œæˆï¼Œè€—æ—¶: 2.77 ç§’
2025-10-31 10:52:47 - httpx - INFO - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-31 10:52:51 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æ£€ç´¢ç»“æœè¯„ä¼°å®Œæˆï¼Œè€—æ—¶: 5.82 ç§’
2025-10-31 10:52:51 - answer_system - INFO - ğŸ“ å‡†å¤‡ç­”æ¡ˆç”Ÿæˆå†…å®¹: 5552 å­—ç¬¦, 9 æ¡æ£€ç´¢ç»“æœ
2025-10-31 10:52:51 - answer_system - INFO - ğŸš€ å¼€å§‹è°ƒç”¨ç­”æ¡ˆç”ŸæˆAPI (æ¨¡å‹: qwen3-max)
2025-10-31 10:52:53 - httpx - INFO - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-31 10:52:53 - answer_system - INFO - âš¡ æ”¶åˆ°é¦–ä¸ªtokenï¼Œè€—æ—¶: 1.40ç§’
2025-10-31 10:53:38 - answer_system - INFO - ğŸ“š ç­”æ¡ˆä¸­ä½¿ç”¨äº† 9/9 ä¸ªå‚è€ƒæ–‡çŒ®: [1, 2, 3, 4, 5, 6, 7, 8, 9]
2025-10-31 10:53:38 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æœ€ç»ˆç­”æ¡ˆç”Ÿæˆå®Œæˆï¼Œè€—æ—¶: 46.97 ç§’
2025-10-31 10:53:38 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æ•´ä¸ªæµç¨‹å®Œæˆï¼Œæ€»è€—æ—¶: 69.86 ç§’
2025-10-31 10:53:38 - streaming_agent - INFO - === StreamingReactAgent.stream_run COMPLETED (FROM RETRIEVAL) ===
2025-10-31 10:53:38 - api_server - INFO - âœ… [Session 40210150] å¤„ç†å®Œæˆï¼Œé‡Šæ”¾æ§½ä½
2025-10-31 10:53:38 - api_server - INFO - âœ… [Session 40210150] ä¼šè¯æ­£å¸¸å®Œæˆ
2025-10-31 10:53:38 - api_server - INFO - ğŸ”“ [Session 40210150] æ§½ä½å·²é‡Šæ”¾
INFO:     10.31.95.28:51988 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:24141 - "GET /health HTTP/1.1" 200 OK
