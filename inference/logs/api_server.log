2025-11-26 09:05:35,634 - base.py - 49 - WARNING - Tool `retrieval` already exists! Overwriting with class <class 'tool_retrieval.Retrieval'>.
2025-11-26 09:05:35 - __main__ - INFO - æ—¥å¿—çº§åˆ«è®¾ç½®ä¸º: INFO
/mnt/data6t/wangxiaojing/tongyi_deepresearch/DeepResearch-openevidence/inference/api_server.py:137: DeprecationWarning: 
        on_event is deprecated, use lifespan event handlers instead.

        Read more about it in the
        [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
        
  @app.on_event("startup")
2025-11-26 09:05:35 - __main__ - INFO - ğŸ”§ å¯åŠ¨é…ç½®:
2025-11-26 09:05:35 - __main__ - INFO -    APIç«¯å£: 5006
2025-11-26 09:05:35 - __main__ - INFO -    vLLMç«¯å£: 6001
2025-11-26 09:05:35 - __main__ - INFO -    æ¨¡å‹è·¯å¾„: /mnt/data6t/wangxiaojing/models/opensource_models/Alibaba-NLP/Tongyi-DeepResearch-30B-A3B
2025-11-26 09:05:35 - api_server - INFO - æ—¥å¿—çº§åˆ«è®¾ç½®ä¸º: INFO
INFO:     Started server process [159518]
INFO:     Waiting for application startup.
2025-11-26 09:05:35 - api_server - INFO - ğŸš€ å¯åŠ¨Tongyi DeepResearch APIæœåŠ¡å™¨...
2025-11-26 09:05:35 - api_server - INFO - âœ… æ¨ç†ä»£ç†é…ç½®æ¨¡æ¿åˆå§‹åŒ–å®Œæˆ
2025-11-26 09:05:35 - api_server - INFO - ğŸ“¡ LLM APIåœ°å€: https://dashscope.aliyuncs.com/compatible-mode/v1
2025-11-26 09:05:35 - api_server - INFO - ğŸ¤– æ¨¡å‹: qwen3-32b
2025-11-26 09:05:35 - api_server - INFO - ğŸ”‘ API Key (masked): sk-56e045b...76260
2025-11-26 09:05:35 - api_server - INFO - ğŸŒ APIæœåŠ¡å™¨å°†åœ¨ç«¯å£ 5006 ä¸Šè¿è¡Œ
2025-11-26 09:05:35 - api_server - INFO - ğŸ”’ å¹¶å‘æ§åˆ¶: æœ€å¤§å¹¶å‘è¯·æ±‚æ•° = 3
2025-11-26 09:05:35 - api_server - INFO - ğŸ’¡ æç¤º: å¯é€šè¿‡ç¯å¢ƒå˜é‡ MAX_CONCURRENT_REQUESTS è°ƒæ•´å¹¶å‘æ•°
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:5006 (Press CTRL+C to quit)
INFO:     10.31.95.28:53643 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:52133 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:36250 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:56882 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:4581 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:2950 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:2949 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:4995 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:4996 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:54988 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:54989 - "GET /api/sessions HTTP/1.1" 200 OK
2025-11-26 09:07:17 - api_server - INFO - ğŸ“ åˆ›å»ºæ–°ä¼šè¯: 9a71d75c...
INFO:     10.31.95.28:54991 - "GET /api/sessions/new HTTP/1.1" 200 OK
2025-11-26 09:07:17 - api_server - INFO - ğŸ“ åˆ›å»ºæ–°ä¼šè¯: 4b8929ae...
INFO:     10.31.95.28:54992 - "GET /api/sessions/new HTTP/1.1" 200 OK
INFO:     10.31.95.28:9766 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:17432 - "OPTIONS /chat/stream HTTP/1.1" 200 OK
INFO:     10.31.95.28:17434 - "POST /chat/stream HTTP/1.1" 200 OK
2025-11-26 09:07:28 - api_server - INFO - â³ [Session 310ee2a7] ç­‰å¾…è·å–å¤„ç†æ§½ä½... (å½“å‰æ´»è·ƒ: 0)
2025-11-26 09:07:28 - api_server - INFO - ğŸš€ [Session 310ee2a7] è·å–æ§½ä½æˆåŠŸï¼Œå¼€å§‹å¤„ç†é—®é¢˜: ç³–å°¿ç—…åœ¨ä¸åŒæ°‘æ—ä¹‹é—´çš„å·®å¼‚...
2025-11-26 09:07:28 - streaming_agent - INFO - === StreamingReactAgent.stream_run START ===
2025-11-26 09:07:28 - streaming_agent - INFO - ğŸ§  å·²å¯ç”¨æ€è€ƒæ¨¡å¼ (thinking_budget=1000)
2025-11-26 09:07:29 - httpx - INFO - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-26 09:07:40 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æ€è€ƒè¿‡ç¨‹å®Œæˆï¼Œè€—æ—¶: 11.95 ç§’
INFO:     10.31.95.28:49340 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:49345 - "GET /health HTTP/1.1" 200 OK
2025-11-26 09:07:48 - streaming_agent - INFO - âœ… æµå¼è°ƒç”¨æˆåŠŸ - æ€è€ƒ: 580å­—, å›ç­”: 582å­—
2025-11-26 09:07:48 - streaming_agent - INFO - ğŸš€ æ£€æµ‹åˆ° 3 ä¸ªå·¥å…·è°ƒç”¨ï¼Œå¼€å§‹å¹¶å‘æ‰§è¡Œ
2025-11-26 09:07:53 - streaming_agent - INFO - ğŸ” å¹¶å‘æ£€ç´¢è°ƒç”¨ 2/3 å®Œæˆï¼Œå…³é”®è¯: ç³–å°¿ç—… æ‚£ç—…ç‡ å°‘æ•°æ°‘æ—
2025-11-26 09:07:54 - streaming_agent - INFO - ğŸ” å¹¶å‘æ£€ç´¢è°ƒç”¨ 1/3 å®Œæˆï¼Œå…³é”®è¯: ç³–å°¿ç—… æ°‘æ—å·®å¼‚ 2å‹
2025-11-26 09:07:54 - streaming_agent - INFO - ğŸ” å¹¶å‘æ£€ç´¢è°ƒç”¨ 3/3 å®Œæˆï¼Œå…³é”®è¯: 2å‹ç³–å°¿ç—… é—ä¼ æ˜“æ„Ÿæ€§ æ°‘æ—
2025-11-26 09:07:54 - streaming_agent - INFO - âœ… åˆå¹¶äº† 3 ç»„æ£€ç´¢ç»“æœ
2025-11-26 09:07:54 - api_server - WARNING - âš ï¸ [Session 310ee2a7] å‘é€å¤§æ•°æ®åŒ…: 20092 å­—èŠ‚, ç±»å‹: retrieval_combined
2025-11-26 09:07:56 - httpx - INFO - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-26 09:07:59 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æ£€ç´¢ç»“æœè¯„ä¼°å®Œæˆï¼Œè€—æ—¶: 4.95 ç§’
2025-11-26 09:07:59 - answer_system - INFO - ğŸ“ å‡†å¤‡ç­”æ¡ˆç”Ÿæˆå†…å®¹: 13259 å­—ç¬¦, 16 æ¡æ£€ç´¢ç»“æœ
2025-11-26 09:07:59 - answer_system - INFO - ğŸš€ å¼€å§‹è°ƒç”¨ç­”æ¡ˆç”ŸæˆAPI (æ¨¡å‹: qwen3-max)
2025-11-26 09:08:01 - httpx - INFO - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-26 09:08:01 - answer_system - INFO - âš¡ æ”¶åˆ°é¦–ä¸ªtokenï¼Œè€—æ—¶: 1.62ç§’
2025-11-26 09:08:04 - answer_system - INFO - ğŸ“š ç­”æ¡ˆä¸­å¼•ç”¨çš„ç¼–å·: [5, 6]
2025-11-26 09:08:04 - answer_system - INFO - ğŸ“š é¢„ç”Ÿæˆçš„å‚è€ƒæ–‡çŒ®ID: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
2025-11-26 09:08:04 - answer_system - INFO - ğŸ“š æœ€ç»ˆä½¿ç”¨çš„å‚è€ƒæ–‡çŒ®æ•°é‡: 2/10
2025-11-26 09:08:04 - answer_system - INFO - ğŸ“š æœ€ç»ˆä½¿ç”¨çš„å‚è€ƒæ–‡çŒ®ID: [5, 6]
2025-11-26 09:08:04 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æœ€ç»ˆç­”æ¡ˆç”Ÿæˆå®Œæˆï¼Œè€—æ—¶: 4.94 ç§’
2025-11-26 09:08:04 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æ•´ä¸ªæµç¨‹å®Œæˆï¼Œæ€»è€—æ—¶: 36.19 ç§’
2025-11-26 09:08:04 - streaming_agent - INFO - === StreamingReactAgent.stream_run COMPLETED (FROM RETRIEVAL) ===
2025-11-26 09:08:04 - api_server - INFO - ğŸ’¾ [Session 310ee2a7] å·²ä¿å­˜å¯¹è¯å†å²ï¼ˆç”¨æˆ·é—®é¢˜ + æœ€ç»ˆç­”æ¡ˆï¼‰
2025-11-26 09:08:04 - api_server - INFO - âœ… [Session 310ee2a7] å¤„ç†å®Œæˆï¼Œé‡Šæ”¾æ§½ä½
2025-11-26 09:08:04 - api_server - INFO - âœ… [Session 310ee2a7] ä¼šè¯æ­£å¸¸å®Œæˆ
2025-11-26 09:08:04 - api_server - INFO - ğŸ”“ [Session 310ee2a7] æ§½ä½å·²é‡Šæ”¾
INFO:     10.31.95.28:4561 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:4564 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:16645 - "GET /citation/5 HTTP/1.1" 200 OK
INFO:     10.31.95.28:54615 - "GET /citation/6 HTTP/1.1" 200 OK
INFO:     10.31.95.28:7553 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:7556 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:1598 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:1600 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:39312 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:39313 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:57224 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:57228 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:47487 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:47488 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:43558 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:43559 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:34468 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:34469 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:12796 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:12797 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:55443 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:47308 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:31366 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:31368 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:49168 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:49169 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:9589 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:9590 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:40914 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:40915 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:37658 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:37566 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:34329 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:34333 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:57570 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:57572 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:21722 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:21724 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:41953 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:41955 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:37818 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:37820 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:59844 - "GET /api/sessions HTTP/1.1" 200 OK
INFO:     10.31.95.28:59846 - "GET /health HTTP/1.1" 200 OK
