2025-10-28 13:11:03,488 - base.py - 49 - WARNING - Tool `retrieval` already exists! Overwriting with class <class 'tool_retrieval.Retrieval'>.
2025-10-28 13:11:03 - __main__ - INFO - æ—¥å¿—çº§åˆ«è®¾ç½®ä¸º: INFO
/mnt/data6t/wangxiaojing/tongyi_deepresearch/DeepResearch-openevidence/inference/api_server.py:134: DeprecationWarning: 
        on_event is deprecated, use lifespan event handlers instead.

        Read more about it in the
        [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
        
  @app.on_event("startup")
ğŸ”§ å¯åŠ¨é…ç½®:
   APIç«¯å£: 5006
   vLLMç«¯å£: 6001
   æ¨¡å‹è·¯å¾„: /mnt/data6t/wangxiaojing/models/opensource_models/Alibaba-NLP/Tongyi-DeepResearch-30B-A3B

2025-10-28 13:11:03 - api_server - INFO - æ—¥å¿—çº§åˆ«è®¾ç½®ä¸º: INFO
INFO:     Started server process [3767880]
INFO:     Waiting for application startup.
ğŸš€ å¯åŠ¨Tongyi DeepResearch APIæœåŠ¡å™¨...
âœ… æ¨ç†ä»£ç†é…ç½®æ¨¡æ¿åˆå§‹åŒ–å®Œæˆ
ğŸ“¡ LLM APIåœ°å€: https://dashscope.aliyuncs.com/compatible-mode/v1
ğŸ¤– æ¨¡å‹: qwen3-32b
ğŸ”‘ API Key (masked): sk-f59e9bf...f991e
ğŸŒ APIæœåŠ¡å™¨å°†åœ¨ç«¯å£ 5006 ä¸Šè¿è¡Œ
ğŸ”’ å¹¶å‘æ§åˆ¶: æœ€å¤§å¹¶å‘è¯·æ±‚æ•° = 3
ğŸ’¡ æç¤º: å¯é€šè¿‡ç¯å¢ƒå˜é‡ MAX_CONCURRENT_REQUESTS è°ƒæ•´å¹¶å‘æ•°
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:5006 (Press CTRL+C to quit)
INFO:     127.0.0.1:47888 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:42556 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:29771 - "GET /health HTTP/1.1" 200 OK
INFO:     10.31.95.28:55901 - "POST /chat/stream HTTP/1.1" 200 OK
â³ [Session 7d698147] ç­‰å¾…è·å–å¤„ç†æ§½ä½... (å½“å‰æ´»è·ƒ: 0)
ğŸš€ [Session 7d698147] è·å–æ§½ä½æˆåŠŸï¼Œå¼€å§‹å¤„ç†é—®é¢˜: ç”·æ€§ï¼Œ52å²ã€‚

ä¸»è¯‰
è…¹ç—›ã€æ¶å¿ƒã€å‘•å1å¤©ã€‚

ç°ç—…å²
æ‚£è€…1å¤©å‰çªå‘ä¸Šè…¹ç—›ï¼Œä¼´æ¶å¿ƒï¼Œå‘•åèƒƒå†…å®¹ç‰©...
2025-10-28 13:11:17 - streaming_agent - INFO - === StreamingReactAgent.stream_run START ===
2025-10-28 13:11:18 - httpx - INFO - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-28 13:11:36 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æ£€ç´¢å·¥å…·æ‰§è¡Œå®Œæˆï¼Œè€—æ—¶: 4.24 ç§’
âš ï¸ [Session 7d698147] å‘é€å¤§æ•°æ®åŒ…: 22746 å­—èŠ‚, ç±»å‹: tool_result
2025-10-28 13:11:40 - httpx - INFO - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
INFO:     10.31.95.28:17781 - "GET /health HTTP/1.1" 200 OK
2025-10-28 13:11:50 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æ£€ç´¢ç»“æœè¯„ä¼°å®Œæˆï¼Œè€—æ—¶: 13.69 ç§’
2025-10-28 13:11:53 - httpx - INFO - HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions "HTTP/1.1 200 OK"
INFO:     10.31.95.28:24569 - "GET /health HTTP/1.1" 200 OK
2025-10-28 13:12:17 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æœ€ç»ˆç­”æ¡ˆç”Ÿæˆå®Œæˆï¼Œè€—æ—¶: 26.88 ç§’
[DEBUG] Processing answer_data: <class 'dict'>, has citations: True
[DEBUG] Full citations count: 10
[DEBUG] Saved citation 1 to global_citations
[DEBUG] Saved citation 2 to global_citations
[DEBUG] Saved citation 3 to global_citations
[DEBUG] Saved citation 4 to global_citations
[DEBUG] Saved citation 5 to global_citations
[DEBUG] Saved citation 6 to global_citations
[DEBUG] Saved citation 7 to global_citations
[DEBUG] Saved citation 8 to global_citations
[DEBUG] Saved citation 9 to global_citations
[DEBUG] Saved citation 10 to global_citations
[DEBUG] Processed citations count: 10
[DEBUG] Added answer_data to response_data, citations: 10
2025-10-28 13:12:17 - streaming_agent - INFO - â±ï¸  ã€æ—¶é—´ç»Ÿè®¡ã€‘æ•´ä¸ªæµç¨‹å®Œæˆï¼Œæ€»è€—æ—¶: 59.80 ç§’
2025-10-28 13:12:17 - streaming_agent - INFO - === StreamingReactAgent.stream_run COMPLETED (FROM RETRIEVAL) ===
âœ… [Session 7d698147] å¤„ç†å®Œæˆï¼Œé‡Šæ”¾æ§½ä½
âœ… [Session 7d698147] ä¼šè¯æ­£å¸¸å®Œæˆ
ğŸ”“ [Session 7d698147] æ§½ä½å·²é‡Šæ”¾
